<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="description"
          content="Website Sistem Informasi Akademik Politeknik Astra. Silahkan gunakan NIM dan password Anda untuk login.">
    <meta name="keywords"
          content="SIA,Sistem,Politeknik Astra,PMA,Akademik,SSO,Polman,Polman Astra,Politeknik Manufaktur,Politeknik Manufaktur Astra,Pendidikan Astra,Astra Politeknik,Polytechnic Astra,Astra Polytechnic,Astratek,Astratech,Kampus Astra,Kampus Terbaik,Politeknik Terbaik,Politeknik Vokasi,Vokasi,Vokasi Terbaik">
    <meta name="author" content="Politeknik Astra">
    <meta name="viewport" content="width=device-width"/>
    <title>Siormawa</title>
    <link rel="shortcut icon" href="../Content/User/logo3.png">
    <link href="../Content/Plugins/bootstrap-4.0.0-alpha.6-dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../Content/Plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="../Content../Content/jquery.fancybox.css" rel="stylesheet"/>
    <link href="../Content../Content/bootstrap-select.min.css" rel="stylesheet"/>
    <link href="../Content/Styles/Style.css" rel="stylesheet"/>
    <script src="../Content/Scripts/tether/tether.min.js"></script>
    <script src="../Content/Scripts/jquery-3.1.1.min.js"></script>
    <script src="../Content/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script src="../Content/Plugins/bootstrap-4.0.0-alpha.6-dist/js/bootstrap.min.js"></script>
    <!--    Ini buat toogle-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script src="../Content/Scripts/jquery.fancybox.pack.js"></script>
    <script src="../Content/Scripts/bootstrap-select.min.js"></script>
    <script src="../Content/Scripts/LetterAvatar.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>
    <script type="text/javascript">
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })

        $(function () {
            $('[rel="tooltip"]').tooltip()
        })

        $(function () {
            $('[data-toggle="popover"]').popover()
        })

        function redirectNotifikasi() {
            window.location.href = 'Page_Notifikasi.aspx';
        }

        function sentValidation(input) {
            $(input).addClass('disabled');
            $(input).text('Mohon tunggu..');
        }

        function pageLoad(sender, args) {
            $('.selectpicker').selectpicker();
            katweKibsAvatar.init({
                dataChars: 2
            });
        }

        function refreshChart() {
            try {
                $('#chartNilai').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#chartKehadiran').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#chartJamMinus').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#chartPelanggaran').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-ketercapaianpertemuan').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-ketercapaianmateri').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-ketercapaianwadir').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-kehadiranmahasiswatingkat1').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-kehadiranmahasiswatingkat2').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-kehadiranmahasiswatingkat3').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            try {
                $('#container-kehadiranmahasiswawadir').highcharts().setSize(undefined, undefined, false);
            } catch (err) {
            }
            for (i = 1; i <= 10; i++) {
                try {
                    $('#container-kehadiranMataKuliah' + i).highcharts().setSize(undefined, undefined, false);
                } catch (err) {
                }
                try {
                    $('#container-ketercapaianMataKuliah' + i).highcharts().setSize(undefined, undefined, false);
                } catch (err) {
                }
            }
        }
    </script>
    <script src="../Content/Scripts/jquery.floatThead.js"></script>
    <style>
        .mce-branding-powered-by {
            display: none;
        }

        table {
            border-top: none;
            border-bottom: none;
            background-color: #FFF;
        }

        .table-striped tbody tr:nth-of-type(2n+1) {
            background-color: #FFF;
        }

        .table-striped tbody tr:nth-of-type(2n), thead {
            background-color: #ECECEC;
        }

        .table-striped tbody tr.pagination-ys {
            background-color: #FFF;
        }

        .highcharts-credits {
            display: none;
            height: 0px;
        }

        .loaderPMB {
            position: absolute;
            left: 50%;
            top: 25%;
            z-index: 1;
            border: 10px solid #f3f3f3; /* Light grey */
            border-top: 10px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            grid-gap: 10px;
            padding: 10px;
        }

        .gallery img {
            text-align: center;
            width: auto;
            height: 190px;
            object-fit: cover;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .gallery .caption {
            margin-top: 5px;
            font-size: 14px;
            color: #666;
            text-align: center;
        }

        .photo-container {
            display: flex;
            flex-wrap: wrap;
        }

        .photo-item {
            position: relative;
            margin: 10px;
            width: 200px;
            height: 200px;
            overflow: hidden;
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .delete-button {
            position: absolute;
            top: 10px;
            left: 20px;
            background-color: red;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: none;
        }

        .gallery-item:hover .delete-button {
            display: block;
        }
    </style>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #333;
            color: #fff;
            font-size: 18px;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .notification.show {
            opacity: 1;
        }
    </style>
    <script src="../Content/assets/js/main.js"></script>

</head>
<body class="scrollstyle2">
<div>
    <div class="polman-nav-static-top">
        <div class="float-left polman-adjust4">
            <div class="fa fa-bars fa-2x polman-adjust2" id="opennav" style="margin-right: 15px; cursor: pointer;"
                 aria-hidden="true"
                 onclick="changestate();"></div>
            <a href="#">
                <img src="../Content/Images/IMG_Logo_astratech.png"
                     style="height: 45px; margin-top: -10px; margin-left: 10px;"/>
            </a>
        </div>
        <div class="polman-menu">
            <nav class="nav justify-content-end" style="padding-top: 5px;">
                <b id="username1" style="position: absolute;margin-top: 10px;"></b>
                <span id="lastlogin"
                      style="font-size: 11px; margin-top: -2px; width: 500px; text-align: right;"><br><br></span>
            </nav>
        </div>
        <div class="polman-menu-bar">
            <div class="float-right">
                <div class="fa fa-bars fa-2x" style="margin-top: 9px; cursor: pointer;" aria-hidden="true"
                     data-toggle="collapse" data-target="#menu" aria-expanded="false" aria-controls="menu"></div>
            </div>
        </div>
        <div class="polman-notifikasi" onclick="redirectNotifikasi();">
            <div class="float-right">
                <div class="fa fa-envelope fa-2x" style="margin-top: 8px; margin-right: 15px; cursor: pointer;"
                     aria-hidden="true"></div>
                <span class="badge badge-pill badge-info polman-badge">
                        1
                    </span>
            </div>
        </div>
    </div>

    <div id="menu" class="polman-nav-static-right collapse scrollstyle2 polman-adjust5">
        <div id="accordion" role="tablist" aria-multiselectable="true">
            <div class="list-group">
                <a id="logoutLink" href="../Login/login.html" onclick="logout()" class="list-group-item list-group-item-action"
                   style="border-radius: 0px; border: none; padding-left: 23px; display: inherit; padding-top: 12px; padding-bottom: 12px;"><i
                        class='fa fa-sign-out fa-lg fa-pull-left'></i>Logout</a>
                <a id="dashboardLink" href='../index.html' class='mt-0 list-group-item list-group-item-action'
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-home fa-lg fa-pull-left'></i>Dashboard </a>
                <a id="eventLink" href='../Event/index.html' class='mt-0 list-group-item list-group-item-action '
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-calendar fa-lg fa-pull-left'></i>Event </a>
                <a id="userLink" href='../User/index.html' class='mt-0 list-group-item list-group-item-action polman-menu-active'
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px; background-color: #e6f0ff; '><i
                        class='fa fa-user-plus fa-lg fa-pull-left'></i>User </a>
                <a id="kandidatLink" href='../Kandidat/index.html' class='mt-0 list-group-item list-group-item-action'
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-users fa-lg fa-pull-left'></i>Kandidat MPM / BEM </a>
                <a id="informasiLink" href='../Informasi/index.html' class='mt-0 list-group-item list-group-item-action '
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-info-circle fa-lg fa-pull-left'></i>Informasi</a>
                <a id="organisasiLink" href='../Organisasi/index.html' class='mt-0 list-group-item list-group-item-action '
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-sitemap fa-lg fa-pull-left'></i>Organisasi</a>
                <a id="jabatanLink" href='../Jabatan/index.html' class='mt-0 list-group-item list-group-item-action '
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-handshake-o fa-lg fa-pull-left'></i>Jabatan</a>
                <a id="periodeLink" href='../Periode/index.html' class='mt-0 list-group-item list-group-item-action '
                   style='border-radius: 0px; border: none; padding-left: 22px; display: inherit; padding-top: 12px; padding-bottom: 12px;'><i
                        class='fa fa-hourglass fa-lg fa-pull-left'></i>Periode</a>
            </div>
        </div>
    </div>
    <div id="allcontent" class="polman-adjust5">
        <ol class="breadcrumb polman-breadcrumb">
            <li class="breadcrumb-item"><a href='http://localhost/sso' data-toggle="tooltip" data-placement="bottom"
                                           title="Menuju Halaman SSO">Sistem Informasi Ormawa</a></li>
            <li class="breadcrumb-item">Event</li>
        </ol>
        <hr/>
        <form>
        <div class="card">
            <div class="card-header">
                <b>Tambah Event</b>
            </div>
            <div class="card-block" style="height: 650px">
                <div class="row">
                    <div class="col-lg-5">
                        <div class="form-group">
                            <label style='font-weight: bold;' for="nama">Nama Event <b
                                    style="color: red">*</b></label>
                            <input type="text" name="nama" id="nama" class="form-control" required/>
                        </div>
                    </div>
                    <div class="col-lg-7">
                        <div class="form-group">
                            <label style='font-weight: bold;' for="deskripsi">Deskripsi Event <b
                                    style="color: red">*</b></label>
                            <input type="text" name="deskripsi" id="deskripsi" class="form-control" required/>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group text-left">
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-lg" title="Tambah Tahapan">
                                <i class="fa fa-plus" title="Tambah Tahapan"></i> Tahapan
                            </button>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="form-group text-left">
                            <hr style="border-top: 1px solid;">
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="form-group">
                            <div class="table responsive">
                            <table id="basic-datatables" class="table table-hover table-bordered table-condensed table-striped grid text-center">
                                    <thead>
                                        <th class="text-center" style="width: 19px"><b>No.</b></th>
                                        <th class="text-center" style="width: 200px"><b>Nama</b></th>
                                        <th class="text-center" style="width: 300px"><b>Deskripsi</b></th>
                                        <th class="text-center" style="width: 70px"><b>Slot (Kuota)</b></th>
                                        <th class="text-center" style="width: 50px"><b>BEM %</b></th>
                                        <th class="text-center" style="width: 50px"><b>MPM %</b></th>
                                        <th class="text-center" style="width: 50px"><b>HIMMA %</b></th>
                                        <th class="text-center" style="width: 100px"><b>Aksi</b></th>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br/>
         <div class="form-group">
             <div class="col-md-offset-2 col-md-10">
                 <a href="../Event/index.html" class="btn btn-outline-secondary">Batal</a>&nbsp;
                 <button type="button" class="btn btn-primary" id="SaveUtama" onclick="SimpanUtama()">Simpan</button>
             </div>
         </div>
        </form>
    </div>

    <!--    Modal Create-->
    <div class="modal fade" id="modal-lg">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header text-center" style="display: flex; align-items: center; justify-content: center";>
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <h3 class="modal-title">Tahapan</h3>
                        </div>
                    </div>
                </div>
                <div class="modal-body ml-4 mr-4">
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="form-group">
                                <label style='font-weight: bold;' for="namatahapan">Nama Tahapan <b
                                        style="color: red">*</b></label>
                                <input type="text" name="namatahapan" id="namatahapan" class="form-control" required/>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <div class="form-group">
                                <label style='font-weight: bold;' for="deskripsitahapan">Deskripsi Tahapan <b
                                        style="color: red">*</b></label>
                                <input type="text" name="deskripsitahapan" id="deskripsitahapan" class="form-control" required/>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <label style='font-weight: bold;' for="slot">Slot <b
                                        style="color: red">*</b></label>
                                <input type="number" name="slot" id="slot" class="form-control" required/>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label style="font-size: 14px; font-weight: bold">Ada Penilaian ? <b style="color: red">*</b></label>
                                <select name="penilaian" id="penilaian" class="form-select" required>
                                    <option value="" disabled selected>Ada Penilaian</option>
                                    <option value="ya">Ya</option>
                                    <option value="tidak">Tidak</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group divPenilaian text-center" hidden>
                                <label style="font-size: 14px; font-weight: bold">Bobot Penilaian (%)</label>
                                <hr>
                            </div>
                        </div>
                        <div class="col-lg-1">
                            <div class="form-group divPenilaian" hidden>
                                <label style='font-weight: bold;'>BEM</label>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group divPenilaian" hidden>
                                <input type="number" name="nilaibem" id="nilaibem" class="form-control"/>
                            </div>
                        </div>
                        <div class="col-lg-1">
                            <div class="form-group divPenilaian" hidden>
                                <label style='font-weight: bold;'>MPM</label>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group divPenilaian" hidden>
                                <input type="number" name="nilaimpm" id="nilaimpm" class="form-control"/>
                            </div>
                        </div>

                        <div class="col-lg-1">
                            <div class="form-group divPenilaian" hidden>
                                <label style='font-weight: bold;'>HIMMA </label>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group divPenilaian" hidden>
                                <input type="number" name="nilaihimma" id="nilaihimma" class="form-control"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer align-content-end">
                    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="fungsiClose()">Close</button>
                    <button type="button" class="btn btn-primary" id="modalSaveButton">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!--    Modal Update   -->
    <div class="modal fade" id="modal-update">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header text-center" style="display: flex; align-items: center; justify-content: center";>
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <h3 class="modal-title">Update Tahapan</h3>
                        </div>
                    </div>
                </div>
                <div class="modal-body ml-4 mr-4">
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="form-group">
                                <label style='font-weight: bold;' for="updatenamatahapan">Nama Tahapan <b
                                        style="color: red">*</b></label>
                                <input type="hidden" name="updateidtahapan" id="updateidtahapan" class="form-control" required/>
                                <input type="text" name="updatenamatahapan" id="updatenamatahapan" class="form-control" required/>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <div class="form-group">
                                <label style='font-weight: bold;' for="updatedeskripsitahapan">Deskripsi Tahapan <b
                                        style="color: red">*</b></label>
                                <input type="text" name="updatedeskripsitahapan" id="updatedeskripsitahapan" class="form-control" required/>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <label style='font-weight: bold;' for="updateslot">Slot <b
                                        style="color: red">*</b></label>
                                <input type="number" name="updateslot" id="updateslot" class="form-control" required/>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label style="font-size: 14px; font-weight: bold">Ada Penilaian ? <b style="color: red">*</b></label>
                                <select name="updatepenilaian" id="updatepenilaian" class="form-select" required>
                                    <option value="" disabled selected>Ada Penilaian</option>
                                    <option value="ya">Ya</option>
                                    <option value="tidak">Tidak</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group divPenilaian text-center" hidden>
                                <label style="font-size: 14px; font-weight: bold">Bobot Penilaian (%)</label>
                                <hr>
                            </div>
                        </div>
                        <div class="col-lg-1">
                            <div class="form-group divPenilaian" hidden>
                                <label style='font-weight: bold;'>BEM</label>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group divPenilaian" hidden>
                                <input type="number" name="updatenilaibem" id="updatenilaibem" class="form-control"/>
                            </div>
                        </div>
                        <div class="col-lg-1">
                            <div class="form-group divPenilaian" hidden>
                                <label style='font-weight: bold;'>MPM</label>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group divPenilaian" hidden>
                                <input type="number" name="updatenilaimpm" id="updatenilaimpm" class="form-control"/>
                            </div>
                        </div>

                        <div class="col-lg-1">
                            <div class="form-group divPenilaian" hidden>
                                <label style='font-weight: bold;'>HIMMA </label>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group divPenilaian" hidden>
                                <input type="number" name="updatenilaihimma" id="updatenilaihimma" class="form-control"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer align-content-end">
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal" onclick="fungsiClose()">Close</button>
                    <button type="button" class="btn btn-primary" id="updatemodalSaveButton">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../Content/assets/vendor/apexcharts/apexcharts.min.js"></script>
<script src="../Content/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../Content/assets/vendor/chart.js/chart.min.js"></script>
<script src="../Content/assets/vendor/echarts/echarts.min.js"></script>
<script src="../Content/assets/vendor/quill/quill.min.js"></script>
<script src="../Content/assets/vendor/simple-datatables/simple-datatables.js"></script>
<script src="../Content/assets/vendor/php-email-form/validate.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<!-- Template Main JS File -->
<script name="Untuk Memunculkan Penilaian">
    var selectElement = document.getElementById('penilaian');
    var selectElementupdate = document.getElementById('updatepenilaian');
    var divElements = document.getElementsByClassName('divPenilaian');

    selectElement.addEventListener('change', function() {
        var selectedOption = selectElement.value;

        for (var i = 0; i < divElements.length; i++) {
            var divElement = divElements[i];

            if (selectedOption === 'ya') {
                divElement.removeAttribute('hidden');
            } else {
                divElement.setAttribute('hidden', 'true');
                $("#nilaibem").val("");
                $("#nilaimpm").val("");
                $("#nilaihimma").val("");
            }
        }
    });

    selectElementupdate.addEventListener('change', function() {
        var selectedOption = selectElementupdate.value;

        for (var i = 0; i < divElements.length; i++) {
            var divElement = divElements[i];

            if (selectedOption === 'ya') {
                divElement.removeAttribute('hidden');
            } else {
                divElement.setAttribute('hidden', 'true');
                $("#nilaibem").val("");
                $("#nilaimpm").val("");
                $("#nilaihimma").val("");
            }
        }
    });

    function hiddenDiv(){
        var divPenilaianElements = document.getElementsByClassName('divPenilaian');
        for (var i = 0; i < divPenilaianElements.length; i++) {
            var divPenilaianElement = divPenilaianElements[i];

            // Mengatur atribut 'hidden' pada masing-masing elemen
            divPenilaianElement.setAttribute('hidden', 'true');
        }
    }

    function bukaDiv(){
        var divPenilaianElements = document.getElementsByClassName('divPenilaian');
        for (var i = 0; i < divPenilaianElements.length; i++) {
            var divPenilaianElement = divPenilaianElements[i];

            // Mengatur atribut 'hidden' pada masing-masing elemen
            divPenilaianElement.removeAttribute('hidden');
        }
    }
</script>
<script>
    var saveBtn = document.getElementById("modalSaveButton");
    var dataTable = document.getElementById("basic-datatables");
    var namaTahapan = document.getElementById("namatahapan");
    var deskripsiTahapan = document.getElementById("deskripsitahapan");
    var nilaibem = document.getElementById("nilaibem");
    var nilaimpm = document.getElementById("nilaimpm");
    var nilaihimma = document.getElementById("nilaihimma");
    var slottahapan = document.getElementById("slot");
    var penilaiantahapan = document.getElementById("penilaian");

    // Update
    var updateBtn = document.getElementById("updatemodalSaveButton");
    var updateidTahapan = document.getElementById("updateidtahapan");
    var updatenamaTahapan = document.getElementById("updatenamatahapan");
    var updatedeskripsiTahapan = document.getElementById("updatedeskripsitahapan");
    var updatenilaibem = document.getElementById("updatenilaibem");
    var updatenilaimpm = document.getElementById("updatenilaimpm");
    var updatenilaihimma = document.getElementById("updatenilaihimma");
    var updateslot = document.getElementById("updateslot");
    var updatepenilaiantahapan = document.getElementById("updatepenilaian");

    // Save Utama
    var saveUtamaBtn = document.getElementById("SaveUtama");
    var namaEvent = document.getElementById("nama");
    var deskripsiEvent = document.getElementById("deskripsi");

    // Tambahkan event listener ke tombol "Save"
    saveBtn.addEventListener("click", function() {
        saveBtn.removeAttribute('data-dismiss');
        var table = $('#basic-datatables').DataTable();
        var existingData = table.rows().data().toArray();
        var existingDataWithoutFirstAndLastColumn = existingData.map(function(row) {
            return row.slice(1,8);
        });
        // Ambil nilai dari input dalam modal
        var nama = namaTahapan.value;
        var deskripsi = deskripsiTahapan.value;
        var bem = nilaibem.value;
        var mpm = nilaimpm.value;
        var himma = nilaihimma.value;
        var slot = slottahapan.value;
        var penilaian = penilaiantahapan.value;

        // Menghitung total
        if(nilaibem.value == ""){bem = "0";}if (nilaimpm.value == ""){mpm = "0";}if (nilaihimma.value == ""){himma = "0";}
        var total = parseInt(bem) + parseInt(mpm) + parseInt(himma);

        var newData = [
            nama, deskripsi, slot, bem, mpm, himma
        ];

        var combinedData;
        if (existingData.length > 0) {
            combinedData = existingDataWithoutFirstAndLastColumn.concat([newData]);
        } else {
            combinedData = [newData];
        }
        //console.log(combinedData);

        if(nama == "" || deskripsi == "" || slot == "" || penilaian == ""){
            alert("Tolong lengkapi semua data !");
        }else if(penilaian == "ya" && total !== 100){
            alert("Bobot penilaian tidak boleh kurang atau lebih dari 100% !");
            nilaibem.value = "";
            nilaimpm.value = "";
            nilaihimma.value = "";
        }else {
            table.clear();

            for (var i = 0; i < combinedData.length; i++) {
                no = i+1;
                var row = [
                    no,
                    combinedData[i][0],
                    combinedData[i][1],
                    combinedData[i][2],
                    combinedData[i][3],
                    combinedData[i][4],
                    combinedData[i][5],
                    '<a href="javascript:void(0)" onclick="moveDataUp('+no+')" title="Pindahkan Tahapan Ke Atas"><i class="fa fa-arrow-up">&nbsp</i></a>' +
                    '<a href="javascript:void(0)" onclick="moveDataDown('+no+')" title="Pindahkan Tahapan Ke Bawah"><i class="fa fa-arrow-down">&nbsp&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Ubah Data Tahapan" data-toggle="modal" data-target="#modal-update" onclick="ubahTahapan('+no+')"><i class="fa fa-pencil-square-o">&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Hapus Data Informasi" onclick="deleteTahapan('+no+')"><i class="fa fa-trash"></i></a>'
                ];
                table.row.add(row);
            }

            table.draw();
            saveBtn.setAttribute('data-dismiss','modal');

            // Clear semua data
            saveBtn.value = "";
            namaTahapan.value = "";
            deskripsiTahapan.value = "";
            nilaibem.value = "";
            nilaimpm.value = "";
            nilaihimma.value = "";
            slottahapan.value = "";
            penilaiantahapan.value = "";
            hiddenDiv();
        }

    });

    function deleteTahapan(id) {

        var confirmDelete = confirm("Anda yakin ingin menghapus tahapan ini?");

        if (confirmDelete) {
            var table = $('#basic-datatables').DataTable();
            var rows = table.rows().nodes();

            /*Hapus row*/
            for (var i = 0; i < rows.length; i++) {
                var currentRow = rows[i];
                var cell = $(currentRow).find("td").eq(0);

                if (cell.text() == id) {
                    table.row(currentRow).remove().draw();
                    break;
                }
            }

            var existingData = table.rows().data().toArray();
            var existingDataReal = existingData.map(function(row) {
                return row.slice(1,8);
            });
            //console.log(existingData);

            table.clear();
            for (var i = 0; i < existingDataReal.length; i++) {
                no = i+1;
                var row = [
                    no,
                    existingDataReal[i][0],
                    existingDataReal[i][1],
                    existingDataReal[i][2],
                    existingDataReal[i][3],
                    existingDataReal[i][4],
                    existingDataReal[i][5],
                    '<a href="javascript:void(0)" onclick="moveDataUp('+no+')" title="Pindahkan Tahapan Ke Atas"><i class="fa fa-arrow-up">&nbsp</i></a>' +
                    '<a href="javascript:void(0)" onclick="moveDataDown('+no+')" title="Pindahkan Tahapan Ke Bawah"><i class="fa fa-arrow-down">&nbsp&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Ubah Data Tahapan" data-toggle="modal" data-target="#modal-update" id="ubahtahapan" onclick="ubahTahapan('+no+')"><i class="fa fa-pencil-square-o">&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Hapus Data Informasi" onclick="deleteTahapan('+no+')"><i class="fa fa-trash">&nbsp&nbsp</i></a>'
                ];
                table.row.add(row);
            }
            table.draw();
        }
    }

    function ubahTahapan(id) {
        var table = $('#basic-datatables').DataTable();
        console.log(table);
        var modalupdate = $("#modal-update");
        var rows = table.rows().nodes();
        var rowData = null;

        for (var i = 0; i < rows.length; i++) {
            var currentRow = rows[i];
            var cell = $(currentRow).find("td").eq(0);

            if (cell.text() == id) {
                rowData = table.row(currentRow).data();
                break;
            }
        }

        if (rowData) {
            var id = rowData[0];
            var nama = rowData[1];
            var deskripsi = rowData[2];
            var slot = rowData[3];
            var bem = rowData[4];
            var mpm = rowData[5];
            var himma = rowData[6];

            // Memasukkan data ke dalam modal
            $("#updateidtahapan").val(id);
            $("#updatenamatahapan").val(nama);
            $("#updatedeskripsitahapan").val(deskripsi);
            $("#updateslot").val(slot);
            $("#updatenilaibem").val(bem);
            $("#updatenilaimpm").val(mpm);
            $("#updatenilaihimma").val(himma);
            if(bem > 0 || mpm > 0 || himma > 0){
                $("#updatepenilaian").val("ya");
                bukaDiv();
            }else{
                $("#updatepenilaian").val("tidak");
                hiddenDiv();
            }
            console.log(id);

            // Tampilkan modal
            modalupdate.modal('show');
        }
    }

    function fungsiClose(){
        // Element pada create modal
        namaTahapan.value = "";
        deskripsiTahapan.value = "";
        nilaibem.value = "";
        nilaimpm.value = "";
        nilaihimma.value = "";
        slottahapan.value = "";
        penilaiantahapan.value = "";

        // Element pada update modal
        updatenamaTahapan.value = "";
        updatedeskripsiTahapan.value = "";
        updatenilaibem.value = "";
        updatenilaimpm.value = "";
        updatenilaihimma.value = "";
        updateslot.value = "";
        updatepenilaiantahapan.value = "";
        hiddenDiv();

    }

    updateBtn.addEventListener("click", function() {

        var id = updateidTahapan.value;
        var nama = updatenamaTahapan.value;
        var deskripsi = updatedeskripsiTahapan.value;
        var bem = updatenilaibem.value;
        var mpm = updatenilaimpm.value;
        var himma = updatenilaihimma.value;
        var slot = updateslot.value;
        var penilaian = updatepenilaiantahapan.value;

        // Menghitung total
        if(updatenilaibem.value == ""){bem = "0";}if (updatenilaimpm.value == ""){mpm = "0";}if (updatenilaihimma.value == ""){himma = "0";}
        var total = parseInt(bem) + parseInt(mpm) + parseInt(himma);

        if(nama == "" || deskripsi == "" || slot == "" || penilaian == "") {
            alert("Tolong lengkapi semua data !")
        }else if(penilaian == "ya" && total !== 100) {
            alert("Bobot penilaian tidak boleh kurang atau lebih dari 100% !");
            updatenilaibem.value = "";
            updatenilaimpm.value = "";
            updatenilaihimma.value = "";
        }else{
            var table = $('#basic-datatables').DataTable();
            var rows = table.rows().nodes();

            for (var i = 0; i < rows.length; i++) {
                var currentRow = rows[i];
                var cell = $(currentRow).find("td").eq(0);

                if (cell.text() == id) {
                    $(currentRow).find("td").eq(1).text(nama)
                    $(currentRow).find("td").eq(2).text(deskripsi);
                    $(currentRow).find("td").eq(3).text(slot);
                    $(currentRow).find("td").eq(4).text(bem);
                    $(currentRow).find("td").eq(5).text(mpm);
                    $(currentRow).find("td").eq(6).text(himma);
                    // Menandai baris yang telah diubah
                    $(currentRow).addClass('updated-row');
                    // Memperbarui data di dalam objek DataTables
                    var rowData = table.row(currentRow).data();
                    rowData[1] = nama;
                    rowData[2] = deskripsi;
                    rowData[3] = slot;
                    rowData[4] = bem;
                    rowData[5] = mpm;
                    rowData[6] = himma;
                    table.row(currentRow).data(rowData);
                    $('#modal-update').modal('hide');
                    break;
                }
            }
            hiddenDiv();
        }
    });

    function moveDataUp(id) {
        var table = $('#basic-datatables').DataTable();
        var existingData = table.rows().data().toArray();
        var existingDataReal = existingData.map(function(row) {
            return row.slice(1,7);
        });

        if (existingDataReal.length >= id && id > 1) {
            var dataToMove = existingDataReal.splice(id - 1, 1)[0];
            existingDataReal.splice(id - 2, 0, dataToMove);

            table.clear();
            for (var i = 0; i < existingDataReal.length; i++) {
                var no = i + 1;
                var row = [
                    no,
                    existingDataReal[i][0],
                    existingDataReal[i][1],
                    existingDataReal[i][2],
                    existingDataReal[i][3],
                    existingDataReal[i][4],
                    existingDataReal[i][5],
                    '<a href="javascript:void(0)" onclick="moveDataUp(' + no + ')" title="Pindahkan Tahapan Ke Atas"><i class="fa fa-arrow-up">&nbsp</i></a>' +
                    '<a href="javascript:void(0)" onclick="moveDataDown(' + no + ')" title="Pindahkan Tahapan Ke Bawah"><i class="fa fa-arrow-down">&nbsp&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Ubah Data Tahapan" data-toggle="modal" data-target="#modal-update" id="ubahtahapan" onclick="ubahTahapan(' + no + ')"><i class="fa fa-pencil-square-o">&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Hapus Data Informasi" onclick="deleteTahapan(' + no + ')"><i class="fa fa-trash">&nbsp&nbsp</i></a>'
                ];
                table.row.add(row);
            }
            table.draw();
        }
    }

    function moveDataDown(id) {
        var table = $('#basic-datatables').DataTable();
        var existingData = table.rows().data().toArray();
        var existingDataReal = existingData.map(function(row) {
            return row.slice(1,7);
        });

        if (existingDataReal.length > id && id >= 1) {
            var dataToMove = existingDataReal.splice(id - 1, 1)[0];
            existingDataReal.splice(id, 0, dataToMove);

            table.clear();
            for (var i = 0; i < existingDataReal.length; i++) {
                var no = i+1;
                var row = [
                    no,
                    existingDataReal[i][0],
                    existingDataReal[i][1],
                    existingDataReal[i][2],
                    existingDataReal[i][3],
                    existingDataReal[i][4],
                    existingDataReal[i][5],
                    '<a href="javascript:void(0)" onclick="moveDataUp('+no+')" title="Pindahkan Tahapan Ke Atas"><i class="fa fa-arrow-up">&nbsp</i></a>' +
                    '<a href="javascript:void(0)" onclick="moveDataDown('+no+')" title="Pindahkan Tahapan Ke Bawah"><i class="fa fa-arrow-down">&nbsp&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Ubah Data Tahapan" data-toggle="modal" data-target="#modal-update" id="ubahtahapan" onclick="ubahTahapan('+no+')"><i class="fa fa-pencil-square-o">&nbsp&nbsp</i></a>' +
                    '<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Hapus Data Informasi" onclick="deleteTahapan('+no+')"><i class="fa fa-trash">&nbsp&nbsp</i></a>'
                ];
                table.row.add(row);
            }
            table.draw();
        }
    }

    // Fungsi buat save ke database

    function SimpanUtama() {
        var nama = namaEvent.value;
        var deskripsi = deskripsiEvent.value;

        if (nama == "" || deskripsi == ""){
            alert("Tolong Lengkapi semua data !");
        }else{
            $.ajax({
                url: "http://localhost:8080/saveEvent?nama=" + nama + "&deskripsi=" + deskripsi,
                success: function (response) {
                    saveTahapan();
                    alert("Event berhasil disimpan");
                },
                error: function (xhr, status, error) {
                    alert("Terjadi kesalahan saat menyimpan event.");
                }
            });
        }
    }

    function saveTahapan(){
        var url2 = 'http://localhost:8080/getLastEvent';
        var table = $('#basic-datatables').DataTable();
        var rows = table.rows().nodes();
        var rowData = null;

        $.getJSON(url2, function (json) {
            var idEvent = json.idEvent;

            for (var i = 0; i < rows.length; i++) {
                var currentRow = rows[i];
                rowData = table.row(currentRow).data();

                if (rowData) {
                    var urutan = rowData[0];
                    var nama = rowData[1];
                    var deskripsi = rowData[2];
                    var slot = rowData[3];
                    var bem = rowData[4];
                    var mpm = rowData[5];
                    var himma = rowData[6];

                    $.ajax({
                        url: "http://localhost:8080/saveTahapan?idEvent=" + idEvent + "&nama=" + nama + "&deskripsi=" + deskripsi + "&slot=" + slot + "&nilaibem=" + bem + "&nilaimpm=" + mpm + "&nilaihimma=" + himma + "&urutan=" + urutan,
                        success: function (response) {
                            location.reload();
                        },
                        error: function (xhr, status, error) {
                            alert("Terjadi kesalahan saat menyimpan tahapan.");
                        }
                    });
                }
            }
        });
        window.location.href = "http://localhost:8080/Event/Index.html";
    }

    function changestate(param) {
        if (param == "open") {
            $(".polman-adjust5").css("marginLeft", "0px");
            $(".hidemenu").css("visibility", "visible");
            $(".headcol").css("marginLeft", "255px");
            $("#opennav").attr("onclick", "changestate()");
        } else {
            $(".polman-adjust5").css("marginLeft", "-250px");
            $(".hidemenu").css("visibility", "hidden");
            $(".headcol").css("marginLeft", "5px");
            //get id opennav and change to closed
            $("#opennav").attr("onclick", "changestate('open')");
        }
    }

    function hidemenu() {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (r) {
                changestate(r.d);
            },
            failure: function (response) {
                alert("Terjadi Kesalahan");
            }
        });
    }

    function getCookieValue(cookieName) {
        var name = cookieName + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var cookieArray = decodedCookie.split(";");

        for (var i = 0; i < cookieArray.length; i++) {
            var cookie = cookieArray[i];
            while (cookie.charAt(0) === " ") {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(name) === 0) {
                return cookie.substring(name.length, cookie.length);
            }
        }

        return "";
    }

    // Mengambil nilai cookie "nama" dan "role"
    var nama = getCookieValue("nama");
    var role = getCookieValue("role");

    document.getElementById("username1").textContent = nama + " (" + role + ")";

    function deleteCookie(cookieName) {
        document.cookie = cookieName + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
    }

    var role = getCookieValue("role"); // Fungsi untuk mendapatkan peran dari cookie
    console.log(role);

    // Daftar elemen sidebar yang perlu diubah berdasarkan peran
    var sidebarElements = [
        { elementId: "logoutLink", allowedRoles: ["Admin", "Ormawa", "Super Admin", "MAHASISWA"] },
        { elementId: "dashboardLink", allowedRoles: ["Admin", "Ormawa", "Super Admin", "MAHASISWA"] },
        { elementId: "eventLink", allowedRoles: ["Admin", "Super Admin"] },
        { elementId: "userLink", allowedRoles: ["Admin"] },
        { elementId: "kandidatLink", allowedRoles: ["Admin"] },
        { elementId: "informasiLink", allowedRoles: ["Admin", "Ormawa", "Super Admin"] },
        { elementId: "organisasiLink", allowedRoles: ["Admin", "Ormawa", "Super Admin"] },
        { elementId: "jabatanLink", allowedRoles: ["Super Admin"]},
        { elementId: "periodeLink", allowedRoles: ["Super Admin"]}
    ];

    // Menampilkan atau menyembunyikan elemen sidebar berdasarkan peran
    for (var i = 0; i < sidebarElements.length; i++) {
        var element = document.getElementById(sidebarElements[i].elementId);
        if (element && sidebarElements[i].allowedRoles.includes(role)) {
            element.style.display = "block"; // Menampilkan elemen sidebar
        } else {
            element.style.display = "none"; // Menyembunyikan elemen sidebar
        }
    }

    function logout() {
        deleteCookie("nama");
        deleteCookie("role");
        deleteCookie("nim");
        deleteCookie("prodi");
        window.location.href = "../Login/login.html";


        /*function checkCookie() {
            var cookieExists = document.cookie.indexOf("namaCookie") !== -1; // Ganti "namaCookie" dengan nama cookie yang ingin Anda periksa

            if (!cookieExists) {
                window.location.href = "../Login/login.html"; // Ganti "halaman-login.html" dengan URL halaman login yang Anda inginkan
            }
        }
        // Panggil fungsi checkCookie saat halaman dimuat
        document.addEventListener("DOMContentLoaded", function() {
            checkCookie();
        });*/
    }


</script>
</body>
</html>